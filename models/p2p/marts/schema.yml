version: 2
models:

- name: api_p2p_discv5_clients_daily
  description: The api_p2p_discv5_clients_daily model tracks daily metrics related to Discv5 clients in the P2P network, providing insights into client activity and distribution over time.
  columns:

  - name: date
    description: The specific day for which the metrics are recorded, formatted as YYYY-MM-DD.
    data_type: Date
    tests:
    - not_null

  - name: metric
    description: The type of metric being measured, indicating the aspect of Discv5 clients (e.g., total count, active clients).
    data_type: String

  - name: label
    description: A categorical identifier that further classifies the metric, such as client version or network segment.
    data_type: String

  - name: value
    description: The numerical measurement of the metric for the given date and label.
    data_type: UInt64
  config:
    access: public
    tags:
    - production
    - p2p
    - tier1
    - api:discv5_clients_count
    - granularity:daily
    materialized: view
  meta:
    owner: analytics-team
    authoritative: false
    generated_by: dbt-schema-gen
    _generated_at: '2025-12-12T23:06:59.306508'
    _generated_fields:
    - description
    - columns.metric.description
    - columns.date.description
    - columns.label.data_type
    - config.tags
    - config.materialized
    - columns.value.description
    - columns.label.description
    - columns.value.data_type
    - columns.metric.data_type
    - columns.date.data_type

- name: api_p2p_discv5_current_fork_daily
  description: The `api_p2p_discv5_current_fork_daily` view tracks the daily count of current Discv5 network forks, providing insights into network stability and changes over time.
  columns:

  - name: date
    description: The specific calendar date for the recorded fork counts, formatted as YYYY-MM-DD.
    data_type: Date
    tests:
    - not_null

  - name: fork
    description: Identifier or name of the specific network fork being tracked.
    data_type: String

  - name: cnt
    description: The number of nodes or instances associated with the specified fork on the given date.
    data_type: UInt64
  config:
    access: public
    materialized: view
    tags:
    - production
    - p2p
    - tier1
    - api:discv5_current_fork_count
    - granularity:daily
  meta:
    owner: analytics-team
    authoritative: false
    generated_by: dbt-schema-gen
    _generated_at: '2025-12-12T23:06:59.306583'
    _generated_fields:
    - description
    - columns.date.description
    - config.tags
    - config.materialized
    - columns.fork.description
    - columns.cnt.data_type
    - columns.fork.data_type
    - columns.cnt.description
    - columns.date.data_type

- name: api_p2p_discv5_next_fork_daily
  description: The api_p2p_discv5_next_fork_daily model provides daily counts of upcoming Discv5 network forks, enabling monitoring of network upgrade activity over time.
  columns:

  - name: date
    description: The specific calendar date for the recorded fork count, formatted as YYYY-MM-DD.
    data_type: Date
    tests:
    - not_null

  - name: fork
    description: Identifier or version of the upcoming fork being tracked.
    data_type: String

  - name: cnt
    description: The number of occurrences or instances of the specified fork on the given date.
    data_type: UInt64
  config:
    access: public
    materialized: view
    tags:
    - production
    - p2p
    - tier1
    - api:discv5_next_fork_count
    - granularity:daily
  meta:
    owner: analytics_team
    authoritative: false
    generated_by: dbt-schema-gen
    _generated_at: '2025-12-12T23:06:59.306620'
    _generated_fields:
    - description
    - columns.date.description
    - config.tags
    - config.materialized
    - columns.fork.description
    - columns.cnt.data_type
    - columns.fork.data_type
    - columns.cnt.description
    - columns.date.data_type

- name: fct_p2p_discv5_forks_daily
  description: The fct_p2p_discv5_forks_daily model aggregates daily peer-to-peer network fork data to support trend analysis and monitoring of network stability.
  columns:

  - name: date
    description: The specific day the data was recorded, formatted as a date.
    data_type: Date
    tests:
    - not_null

  - name: label
    description: A categorical identifier representing different fork types or categories.
    data_type: String

  - name: fork
    description: The identifier or name of the specific fork event or version.
    data_type: String

  - name: cnt
    description: The count of occurrences or instances of the specified fork on the given date.
    data_type: UInt64
  config:
    access: public
    tags:
    - p2p
    - discv5
    - forks
    materialized: table
  meta:
    owner: analytics-team
    authoritative: false
    generated_by: dbt-schema-gen
    _generated_at: '2025-12-12T23:06:59.306843'
    _generated_fields:
    - description
    - columns.date.description
    - columns.label.data_type
    - columns.fork.description
    - columns.cnt.data_type
    - columns.label.description
    - columns.fork.data_type
    - columns.cnt.description
    - columns.date.data_type


- name: api_p2p_clients_latest
  description: This view provides the latest counts and percentage changes of P2P clients for discv4 and discv5 protocols, enabling monitoring of client growth trends over the most recent week.
  columns:

  - name: date
    description: The date corresponding to the latest available data for the client counts.
    data_type: Date
    tests:
    - not_null

  - name: discv4_count
    description: The total number of discv4 clients recorded on the latest date.
    data_type: UInt64

  - name: change_discv4_pct
    description: Percentage change in Discv4 clients compared to 7 days prior.
    data_type: Float64

  - name: discv5_count
    description: Number of Discv5 clients for the latest date.
    data_type: UInt64

  - name: change_discv5_pct
    description: Percentage change in Discv5 clients compared to 7 days prior.
    data_type: Float64
  config:
    access: public
    materialized: view
    tags:
    - production
    - p2p
    - tier0
    - api:clients_count
    - granularity:latest
  meta:
    owner: analytics-team
    authoritative: false
    generated_by: dbt-schema-gen
    _generated_at: '2025-12-12T23:06:59.306363'
    _generated_fields:
    - description
    - columns.date.description
    - columns.discv4_count.data_type
    - config.tags
    - config.materialized
    - columns.discv4_count.description
    - columns.date.data_type

- name: api_p2p_discv4_clients_daily
  description: The api_p2p_discv4_clients_daily view tracks daily metrics related to the number of Discv4 clients in the P2P network, supporting operational monitoring and trend analysis.
  columns:

  - name: date
    description: The specific calendar date for the recorded metrics, formatted as YYYY-MM-DD.
    data_type: Date
    tests:
    - not_null

  - name: metric
    description: The type of metric being reported, such as client counts or other relevant measurements.
    data_type: String

  - name: label
    description: A categorical identifier providing additional context or segmentation for the metric, such as client type or network segment.
    data_type: String

  - name: value
    description: The numeric measurement corresponding to the metric and label, representing counts or other quantitative data.
    data_type: UInt64
  config:
    access: public
    tags:
    - production
    - p2p
    - tier1
    - api:discv4_clients_count
    - granularity:daily
    materialized: view
  meta:
    owner: analytics-team
    authoritative: false
    generated_by: dbt-schema-gen
    _generated_at: '2025-12-12T23:06:59.306423'
    _generated_fields:
    - description
    - columns.metric.description
    - columns.date.description
    - columns.label.data_type
    - config.tags
    - config.materialized
    - columns.value.description
    - columns.label.description
    - columns.value.data_type
    - columns.metric.data_type
    - columns.date.data_type

- name: api_p2p_discv4_clients_latest
  description: The api_p2p_discv4_clients_latest view provides the most recent aggregated counts of Discv4 P2P clients, facilitating real-time monitoring of client metrics at the latest date.
  columns:

  - name: metric
    description: The name of the specific client metric being reported.
    data_type: String

  - name: label
    description: A categorical identifier or subcategory associated with the metric.
    data_type: String

  - name: value
    description: The numeric value of the metric, representing client counts or measurements.
    data_type: UInt64
  config:
    access: public
    materialized: view
    tags:
    - production
    - p2p
    - tier0
    - api:discv4_clients_count
    - granularity:latest
  meta:
    owner: analytics-team
    authoritative: false
    generated_by: dbt-schema-gen
    _generated_at: '2025-12-12T23:06:59.306462'
    _generated_fields:
    - description
    - columns.metric.description
    - columns.label.data_type
    - config.tags
    - config.materialized
    - columns.value.description
    - columns.label.description
    - columns.value.data_type
    - columns.metric.data_type

- name: api_p2p_discv5_clients_latest
  description: The api_p2p_discv5_clients_latest model provides a snapshot of the latest Discv5 peer-to-peer client metrics, enabling real-time monitoring of client counts and statuses.
  columns:

  - name: metric
    description: The name of the specific metric being reported, such as client count or status indicator.
    data_type: String

  - name: label
    description: A descriptive label categorizing the metric, such as client type or status category.
    data_type: String

  - name: value
    description: The numerical value associated with the metric and label, representing counts or measurements at the latest date.
    data_type: UInt64
  config:
    access: public
    tags:
    - production
    - p2p
    - tier0
    - api:discv5_clients_count
    - granularity:latest
    materialized: view
  meta:
    owner: analytics-team
    authoritative: false
    generated_by: dbt-schema-gen
    _generated_at: '2025-12-12T23:06:59.306543'
    _generated_fields:
    - description
    - columns.metric.description
    - columns.label.data_type
    - config.tags
    - config.materialized
    - columns.value.description
    - columns.label.description
    - columns.value.data_type
    - columns.metric.data_type

- name: api_p2p_topology_latest
  description: The api_p2p_topology_latest model provides a real-time view of peer-to-peer network topology, capturing the latest connections and their geographic and organizational attributes for analysis and monitoring.
  columns:

  - name: protocol
    description: The communication protocol used between peers, such as TCP or UDP.
    data_type: String

  - name: date
    description: The date when the topology data was recorded, in YYYY-MM-DD format.
    data_type: Date
    tests:
    - not_null

  - name: peer_discovery_id_prefix
    description: Prefix of the unique identifier for the peer discovered in the network.
    data_type: UInt64

  - name: peer_client
    description: The client software or implementation used by the peer.
    data_type: String

  - name: peer_city
    description: City where the peer is located.
    data_type: String

  - name: peer_country
    description: Country where the peer is located.
    data_type: String

  - name: peer_org
    description: Organization associated with the peer, if available.
    data_type: String

  - name: peer_lat
    description: Latitude coordinate of the peer's geographic location.
    data_type: Float64

  - name: peer_lon
    description: Longitude coordinate of the peer's geographic location.
    data_type: Float64

  - name: neighbor_discovery_id_prefix
    description: Prefix of the unique identifier for the neighboring peer.
    data_type: UInt64

  - name: neighbor_client
    description: Client software or implementation used by the neighboring peer.
    data_type: String

  - name: neighbor_city
    description: City where the neighboring peer is located.
    data_type: String

  - name: neighbor_country
    description: Country where the neighboring peer is located.
    data_type: String

  - name: neighbor_org
    description: Organization associated with the neighboring peer, if available.
    data_type: String

  - name: neighbor_lat
    description: Latitude coordinate of the neighboring peer's location.
    data_type: Float64

  - name: neighbor_lon
    description: Longitude coordinate of the neighboring peer's location.
    data_type: Float64

  - name: cnt
    description: Count of occurrences or connections between the peer and neighbor, representing the connection strength or frequency.
    data_type: UInt64
  config:
    access: public
    materialized: view
    tags:
    - production
    - p2p
    - tier0
    - api:network_topology
    - granularity:latest
  meta:
    owner: analytics-team
    authoritative: false
    generated_by: dbt-schema-gen
    _generated_at: '2025-12-12T23:06:59.306743'
    _generated_fields:
    - columns.peer_org.description
    - columns.peer_client.data_type
    - columns.peer_lon.description
    - columns.neighbor_lon.description
    - columns.date.description
    - columns.neighbor_lon.data_type
    - columns.peer_discovery_id_prefix.data_type
    - config.tags
    - columns.neighbor_country.data_type
    - columns.peer_lon.data_type
    - columns.peer_country.data_type
    - columns.cnt.description
    - description
    - columns.peer_lat.description
    - columns.neighbor_discovery_id_prefix.data_type
    - columns.neighbor_lat.data_type
    - columns.peer_lat.data_type
    - columns.neighbor_client.description
    - columns.peer_city.description
    - columns.peer_country.description
    - columns.peer_client.description
    - columns.date.data_type
    - columns.neighbor_city.description
    - columns.peer_org.data_type
    - columns.neighbor_org.data_type
    - columns.neighbor_city.data_type
    - columns.protocol.data_type
    - columns.neighbor_org.description
    - columns.peer_discovery_id_prefix.description
    - columns.neighbor_client.data_type
    - columns.neighbor_lat.description
    - config.materialized
    - columns.peer_city.data_type
    - columns.neighbor_country.description
    - columns.cnt.data_type
    - columns.protocol.description
    - columns.neighbor_discovery_id_prefix.description

- name: api_p2p_visits_latest
  description: This view provides the latest daily visit metrics for P2P protocols (discv4 and discv5), including total visits, success rates, and crawl counts, along with their percentage changes compared to the previous 7 days.
  columns:

  - name: date
    description: The date for which the visit metrics are reported.
    data_type: Date
    tests:
    - not_null

  - name: crawls
    description: The number of crawl attempts recorded on the specified date.
    data_type: UInt64

  - name: discv4_total_visits
    description: Total number of Discv4 visits in the latest data snapshot.
    data_type: UInt64

  - name: discv4_pct_successful
    description: Percentage of successful Discv4 visits, rounded to one decimal.
    data_type: Float64

  - name: discv4_crawls
    description: Number of Discv4 crawl attempts in the latest data.
    data_type: UInt64

  - name: change_discv4_crawls_pct
    description: Percentage change in Discv4 crawls compared to the previous week.
    data_type: Float64

  - name: discv5_total_visits
    description: Total number of Discv5 visits in the latest data snapshot.
    data_type: UInt64

  - name: discv5_pct_successful
    description: Percentage of successful Discv5 visits, rounded to one decimal.
    data_type: Float64

  - name: discv5_crawls
    description: Number of Discv5 crawl attempts in the latest data.
    data_type: UInt64

  - name: change_discv5_crawls_pct
    description: Percentage change in Discv5 crawls compared to the previous week.
    data_type: Float64
  config:
    access: public
    materialized: view
    tags:
    - production
    - p2p
    - tier0
    - api:visits_per_protocol
    - granularity:latest
  meta:
    owner: analytics_team
    authoritative: false
    generated_by: dbt-schema-gen
    _generated_at: '2025-12-12T23:06:59.306800'
    _generated_fields:
    - description
    - columns.date.description
    - config.tags
    - config.materialized
    - columns.crawls.description
    - columns.crawls.data_type
    - columns.date.data_type

- name: fct_p2p_topology_latest
  description: This view consolidates the latest peer-to-peer topology data from DiscV4 and DiscV5 protocols, enabling analysis of network connections and geographic distribution.
  columns:

  - name: date
    description: The date when the topology data was recorded.
    data_type: Date
    tests:
    - not_null

  - name: peer_ip
    description: IP address of the peer node initiating the connection.
    data_type: String

  - name: peer_discovery_id_prefix
    description: Prefix of the peer's discovery identifier.
    data_type: UInt64

  - name: peer_client
    description: Client software used by the peer node.
    data_type: String

  - name: peer_hostname
    description: Hostname of the peer node.
    data_type: String

  - name: peer_city
    description: City where the peer node is located.
    data_type: String

  - name: peer_country
    description: Country where the peer node is located.
    data_type: String

  - name: peer_org
    description: Organization associated with the peer node.
    data_type: String

  - name: peer_lat
    description: Latitude coordinate of the peer node, in decimal degrees.
    data_type: Float64

  - name: peer_lon
    description: Longitude coordinate of the peer node, in decimal degrees.
    data_type: Float64

  - name: neighbor_ip
    description: IP address of the neighboring node in the topology.
    data_type: String

  - name: neighbor_discovery_id_prefix
    description: Prefix of the neighbor's discovery identifier.
    data_type: UInt64

  - name: neighbor_client
    description: Client software used by the neighbor node.
    data_type: String

  - name: neighbor_city
    description: City where the neighbor node is located.
    data_type: String

  - name: neighbor_country
    description: Country where the neighbor node is located.
    data_type: String

  - name: neighbor_org
    description: Organization associated with the neighbor node.
    data_type: String

  - name: neighbor_lat
    description: Latitude coordinate of the neighbor node, in decimal degrees.
    data_type: Float64

  - name: neighbor_lon
    description: Longitude coordinate of the neighbor node, in decimal degrees.
    data_type: Float64

  - name: cnt
    description: Number of observed connections between the peer and neighbor nodes.
    data_type: UInt64
  config:
    access: public
    tags:
    - production
    - p2p
    - topology
    materialized: view
  meta:
    owner: analytics_team
    authoritative: false
    generated_by: dbt-schema-gen
    _generated_at: '2025-12-12T23:06:59.307124'
    _generated_fields:
    - columns.peer_hostname.data_type
    - columns.peer_client.data_type
    - columns.peer_org.description
    - columns.peer_lon.description
    - columns.date.description
    - columns.neighbor_lon.description
    - columns.neighbor_lon.data_type
    - columns.peer_discovery_id_prefix.data_type
    - config.tags
    - columns.neighbor_country.data_type
    - columns.peer_lon.data_type
    - columns.peer_country.data_type
    - columns.peer_ip.data_type
    - columns.cnt.description
    - description
    - columns.peer_lat.description
    - columns.neighbor_discovery_id_prefix.data_type
    - columns.neighbor_ip.data_type
    - columns.neighbor_lat.data_type
    - columns.peer_lat.data_type
    - columns.neighbor_client.description
    - columns.peer_city.description
    - columns.peer_country.description
    - columns.peer_client.description
    - columns.date.data_type
    - columns.neighbor_city.description
    - columns.peer_org.data_type
    - columns.neighbor_org.data_type
    - columns.neighbor_city.data_type
    - columns.neighbor_org.description
    - columns.peer_ip.description
    - columns.peer_discovery_id_prefix.description
    - columns.neighbor_client.data_type
    - columns.neighbor_lat.description
    - columns.peer_hostname.description
    - config.materialized
    - columns.peer_city.data_type
    - columns.neighbor_country.description
    - columns.cnt.data_type
    - columns.neighbor_ip.description
    - columns.neighbor_discovery_id_prefix.description
