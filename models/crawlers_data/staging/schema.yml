version: 2
models:

- name: stg_crawlers_data__dune_labels
  description: (helpful, business-facing; use a folded block scalar `>`; no blank lines)
  columns:
  - name: label
    description: concise
    data_type: String
  - name: address
    description: concise
    data_type: String
  - name: introduced_at
    description: concise
    data_type: String
  - name: label_raw
    description: concise
    data_type: String
  config:
    access: public
  meta:
    owner: null
    authoritative: false
    generated_by: schema-writer
- name: stg_crawlers_data__dune_prices
  description: Daily token prices per symbol from the Dune crawler (generic per-token table).
  columns:
    - name: date
      description: Date (UTC) for the price snapshot.
      data_type: Date
      tests:
        - not_null
    - name: symbol
      description: Uppercased token symbol.
      data_type: String
      tests:
        - not_null
    - name: price
      description: Latest observed price for the token on that day.
      data_type: Float64
      tests:
        - not_null
  tests:
    - dbt_utils.unique_combination_of_columns:
        combination_of_columns: [date, symbol]
  config:
    access: public
  meta:
    owner: analytics
    authoritative: false
    generated_by: schema-writer
- name: stg_crawlers_data__dune_bridge_flows
  description: >
    Ledger of bridge transfers (from Dune MV) loaded into ClickHouse and exposed
    as a staging view. One row â‰ˆ one flow between source_chain and dest_chain via a bridge.
  columns:
    - name: timestamp
      description: UTC timestamp of the flow.
      data_type: DateTime
      tests:
        - not_null
    - name: bridge
      description: Bridge name/identifier.
      data_type: String
      tests:
        - not_null
    - name: source_chain
      description: Origin chain name.
      data_type: String
      tests:
        - not_null
    - name: dest_chain
      description: Destination chain name.
      data_type: String
      tests:
        - not_null
    - name: token
      description: Token symbol involved in the transfer.
      data_type: String
      tests:
        - not_null
    - name: amount_token
      description: Amount of tokens transferred (native token units).
      data_type: Float64
    - name: amount_usd
      description: USD value of the transfer at the time recorded.
      data_type: Float64
    - name: direction
      description: >
        Flow direction relative to Gnosis:
        'in'  if dest_chain = 'Gnosis',
        'out' if source_chain = 'Gnosis',
        else 'xchain'.
      data_type: String
    - name: net_usd
      description: Signed USD flow relative to Gnosis (in = +amount_usd, out = -amount_usd, xchain = 0).
      data_type: Float64
  config:
    access: public
  meta:
    owner: analytics
    authoritative: false
    generated_by: schema-writer
