version: 2
models:

- name: execution_txs_info_daily
  description: Business-facing summary of daily execution transactions, including counts, gas usage, and average/median gas prices, aggregated by date, transaction type, and success status.
  columns:
  - name: date
    description: Date representing the start of the day (UTC).
    data_type: DateTime
  - name: transaction_type
    description: Type of transaction (e.g., legacy, EIP-1559).
    data_type: String
  - name: success
    description: Transaction success status (1 = success, 0 = failure).
    data_type: UInt8
  - name: n_txs
    description: Total number of transactions for the given grouping.
    data_type: UInt64
  - name: gas_used
    description: Total gas used by transactions (sum over group).
    data_type: UInt64
  - name: gas_price_avg
    description: Average gas price (wei) across transactions in the group.
    data_type: Int32
  - name: gas_price_median
    description: Median gas price (wei) across transactions in the group.
    data_type: Int32
  config:
    access: public
    materialized: table
    tags:
    - daily
    - execution
- name: fct_execution_transactions_cnt_daily
  description: Business-facing table summarizing daily counts of execution transactions, including transaction types, success status, and total number of transactions.
  columns:
  - name: date
    description: Date of the transaction count (YYYY-MM-DD).
    data_type: Date
  - name: transaction_type
    description: Type of transaction (e.g., transfer, contract call).
    data_type: String
  - name: success
    description: Indicates if the transaction was successful (1) or reverted (0).
    data_type: UInt8
  - name: n_txs
    description: Total number of transactions of this type and success status on the given date.
    data_type: UInt64
  config:
    access: public
- name: fct_execution_transactions_gas_used_daily
  description: Business-facing table aggregating daily execution transaction data, including gas usage, transaction counts, and value metrics for each day.
  columns:
  - name: date
    description: The day for which the metrics are aggregated, derived from block_timestamp.
    data_type: DateTime
  - name: transaction_type
    description: Type of transaction (e.g., legacy, EIP-1559), as string.
    data_type: String
  - name: success
    description: Indicator if transaction succeeded (1) or reverted (0).
    data_type: UInt8
  - name: n_txs
    description: Total number of transactions executed on the day.
    data_type: UInt64
  - name: xdai_value
    description: Sum of transaction values converted to XDAI (wei divided by 10^18).
    data_type: Float64
  - name: xdai_value_avg
    description: Average transaction value in XDAI for the day.
    data_type: Float64
  - name: xdai_value_median
    description: Median transaction value in XDAI for the day.
    data_type: Float64
  - name: gas_used
    description: Total gas used by all transactions on the day.
    data_type: UInt64
  - name: gas_price_avg
    description: Average gas price (wei) across transactions, cast to Int32.
    data_type: Int32
  - name: gas_price_median
    description: Median gas price (wei) across transactions, cast to Int32.
    data_type: Int32
  config:
    access: public
    materialized: incremental
    tags:
    - gas
    - transactions
    - daily
- name: fct_execution_transactions_value_daily
  description: Business-facing table summarizing daily transaction values, success status, and transaction types from execution data.
  columns:
  - name: date
    description: Date of the transaction day (YYYY-MM-DD).
    data_type: Date
  - name: transaction_type
    description: Type of transaction (e.g., transfer, contract call).
    data_type: String
  - name: success
    description: Indicator if transaction succeeded (1) or failed (0).
    data_type: UInt8
  - name: xdai_value
    description: Total value transferred in wei.
    data_type: UInt64
  - name: xdai_value_avg
    description: Average transaction value in wei for the day.
    data_type: Float64
  - name: xdai_value_median
    description: Median transaction value in wei for the day.
    data_type: Float64
  config:
    access: public
- name: fct_execution_transactions_active_accounts_daily
  description: Daily aggregation of active accounts from execution transactions.
  columns:
  - name: date
    description: Date of the aggregation.
    data_type: String
  - name: active_accounts
    description: Bitmap merge of active accounts.
    data_type: String
  config:
    materialized: view
    access: public
    tags:
    - production
    - execution
    - transactions
  meta:
    owner: analytics_engineer
    authoritative: false
    generated_by: schema-writer
- name: fct_execution_transactions_active_accounts_hourly_recent
  description: '"Model representing the hourly active accounts in recent transactions."'
  columns:
  - name: hour
    description: Hour of the day.
    data_type: UInt32
    tests:
    - not_null
  - name: active_accounts
    description: Merged bitmap state of active accounts.
    data_type: String
    tests:
    - not_null
  config:
    materialized: view
    access: public
    tags:
    - production
    - execution
    - transactions
    - hourly
  meta:
    owner: analytics_engineer
    authoritative: false
    generated_by: schema-writer
- name: fct_execution_transactions_active_accounts_monthly
  description: Monthly count of active accounts based on execution transactions.
  columns:
  - name: month
    description: Month of the data
    data_type: DateTime
  - name: active_accounts
    description: Bitmap merged active accounts
    data_type: String
  config:
    access: public
  meta:
    owner: analytics_engineer
    authoritative: false
    generated_by: schema-writer
- name: api_execution_transactions_daily
  description: Daily aggregation of API execution transactions.
  columns:
  - name: date
    description: Date of the transaction.
    data_type: String
  - name: value
    description: Aggregated sum of transactions.
    data_type: Float64
  config:
    materialized: view
    access: public
    tags:
    - production
    - execution
    - transactions
  meta:
    owner: analytics_engineer
    authoritative: false
    generated_by: schema-writer
- name: api_execution_transactions_monthly
  description: Monthly sum of successful API execution transactions.
  columns:
  - name: date
    description: Month of the transactions
    data_type: DateTime
  - name: value
    description: Total number of transactions
    data_type: Float64
  config:
    access: public
  meta:
    owner: analytics_engineer
    authoritative: false
    generated_by: schema-writer
- name: api_execution_transactions_by_project_daily
  description: Daily count of API execution transactions by project.
  columns:
  - name: date
    description: Date of the transactions.
    data_type: DateTime
  - name: label
    description: Project label.
    data_type: String
  - name: value
    description: Number of transactions.
    data_type: UInt64
  config:
    access: public
  meta:
    owner: analytics_engineer
    authoritative: false
    generated_by: schema-writer
- name: api_execution_transactions_active_accounts_hourly_ma_24h
  description: Hourly moving average of active accounts based on recent transactions.
  columns:
  - name: date
    description: Hourly timestamp.
    data_type: DateTime
  - name: value
    description: Hourly moving average of active accounts.
    data_type: Float64
  config:
    materialized: view
    tags:
    - production
    - execution
    - transactions
    - hourly
    access: public
  meta:
    owner: analytics_engineer
    authoritative: false
    generated_by: schema-writer
- name: api_execution_transactions_active_accounts_daily
  description: Daily count of active accounts involved in API execution transactions.
  columns:
  - name: date
    description: Date of the data entry.
    data_type: String
  - name: value
    description: Number of active accounts.
    data_type: String
  config:
    materialized: view
    access: public
    tags:
    - production
    - execution
    - transactions
  meta:
    owner: analytics_engineer
    authoritative: false
    generated_by: schema-writer
- name: api_execution_transactions_active_accounts_monthly
  description: Monthly count of active accounts involved in API execution transactions.
  columns:
  - name: date
    description: Month of the data
    data_type: String
  - name: value
    description: Number of active accounts
    data_type: UInt64
  config:
    materialized: view
    tags:
    - production
    - execution
    - transactions
    access: public
  meta:
    owner: analytics_engineer
    authoritative: false
    generated_by: schema-writer
- name: api_execution_transactions_active_accounts_by_project_daily
  description: '"Daily count of active accounts executing transactions by project."'
  columns:
  - name: date
    description: Date of the data.
    data_type: String
  - name: label
    description: Project label.
    data_type: String
  - name: value
    description: Aggregated active accounts.
    data_type: String
  config:
    materialized: view
    access: public
    tags:
    - production
    - execution
    - transactions
  meta:
    owner: analytics_engineer
    authoritative: false
    generated_by: schema-writer
- name: api_execution_transactions_fees_daily
  description: Raw data showing the total native and USD fees from executed API transactions on a daily basis.
  columns:
  - name: day
    description: Date of the transactions.
    data_type: DateTime
  - name: total_fee_native
    description: Total native token fees.
    data_type: Float64
  - name: total_fee_usd
    description: Total fees in USD.
    data_type: Float64
  config:
    materialized: view
    tags:
    - production
    - execution
    - transactions
    access: public
  meta:
    owner: analytics_engineer
    authoritative: false
    generated_by: schema-writer
- name: api_execution_transactions_cnt_daily
  description: Daily count of API execution transactions.
  columns:
  - name: date
    description: Date of the transaction.
    data_type: DateTime
    tests:
    - not_null
  - name: transaction_type
    description: Type of the transaction.
    data_type: UInt32
    tests:
    - not_null
  - name: value
    description: Number of transactions.
    data_type: UInt64
    tests:
    - not_null
  config:
    materialized: view
    access: public
    tags:
    - production
    - execution
    - transactions
  meta:
    owner: analytics_engineer
    authoritative: false
    generated_by: schema-writer
- name: api_execution_transactions_cnt_total
  description: Total count of API execution transactions by transaction type.
  columns:
  - name: transaction_type
    description: Envelope type (0 = legacy, 1 = access-list, 2 = EIP-1559).
    data_type: UInt32
    tests:
    - not_null
  config:
    access: public
  meta:
    owner: analytics_engineer
    authoritative: false
    generated_by: schema-writer
- name: api_execution_transactions_gas_used_daily
  description: '"Daily gas usage statistics for API execution transactions."'
  columns:
  - name: date
    description: Date of the transaction.
    data_type: DateTime
    tests:
    - not_null
  - name: transaction_type
    description: Type of the transaction.
    data_type: UInt32
  - name: gas_used
    description: Total gas consumed by the transaction.
    data_type: UInt64
    tests:
    - not_null
  - name: gas_price_avg
    description: Average gas price for the transaction.
    data_type: UInt64
  - name: gas_price_median
    description: Median gas price for the transaction.
    data_type: UInt64
  config:
    access: public
  meta:
    owner: analytics_engineer
    authoritative: false
    generated_by: schema-writer
- name: api_execution_transactions_value_daily
  description: Daily aggregated values of executed transactions on the API layer.
  columns:
  - name: date
    description: Date when the transactions occurred.
    data_type: String
    tests:
    - not_null
  - name: transaction_type
    description: Type of the transaction.
    data_type: UInt32
  - name: xdai_value
    description: Value of the transaction in XDAI.
    data_type: String
  - name: xdai_value_avg
    description: Average value of transactions in XDAI.
    data_type: String
  - name: xdai_value_median
    description: Median value of transactions in XDAI.
    data_type: String
  config:
    materialized: view
    access: public
    tags:
    - production
    - execution
    - transactions
  meta:
    owner: analytics_engineer
    authoritative: false
    generated_by: schema-writer
- name: api_execution_transactions_gas_share_by_project_daily
  description: Calculates the percentage of gas used by each project in daily transactions.
  columns:
  - name: date
    description: Date of the transaction.
    data_type: DateTime
  - name: label
    description: Project name.
    data_type: String
  - name: value
    description: Percentage of gas used by the project.
    data_type: Float64
  config:
    materialized: view
    tags:
    - production
    - execution
    - transactions
    - gas
    access: public
  meta:
    owner: analytics_engineer
    authoritative: false
    generated_by: schema-writer
- name: api_execution_transactions_fees_native_daily
  description: Daily sum of native token fees incurred in successful execution transactions.
  columns:
  - name: date
    description: Date of the transaction.
    data_type: DateTime
    tests:
    - not_null
  - name: value
    description: Total sum of native token fees.
    data_type: Float64
    tests:
    - not_null
  config:
    materialized: view
    access: public
    tags:
    - production
    - execution
    - transactions
  meta:
    owner: analytics_engineer
    authoritative: false
    generated_by: schema-writer
- name: api_execution_transactions_fees_usd_daily
  description: Daily sum of transaction fees in USD executed through the API.
  columns:
  - name: date
    description: Date of the transactions.
    data_type: String
    tests:
    - not_null
  - name: value
    description: Total transaction fees in USD.
    data_type: Float64
    tests:
    - not_null
  config:
    access: public
  meta:
    owner: analytics_engineer
    authoritative: false
    generated_by: schema-writer
- name: api_execution_transactions_active_accounts_by_project_latest_day
  description: Latest closed day active accounts by project (with % change vs previous day).
  columns:
  - name: label
    description: Project
    data_type: String
  - name: change_pct
    description: Percentage change vs previous day
    data_type: Float64
  - name: value
    description: Value
    data_type: String
  config:
    access: public
  meta:
    owner: analytics_engineer
    authoritative: false
    generated_by: schema-writer
- name: api_execution_transactions_active_accounts_latest_day
  description: Latest closed day active accounts (with % change vs previous day).
  columns:
  - name: value
    description: Value of active accounts.
    data_type: String
  - name: change_pct
    description: Percentage change vs previous day.
    data_type: String
  config:
    access: public
  meta:
    owner: analytics_engineer
    authoritative: false
    generated_by: schema-writer
- name: api_execution_transactions_by_project_latest_day
  description: Latest closed day transactions by project (with % change vs previous day)
  columns:
  - name: label
    description: Project
    data_type: String
  - name: value
    description: Transaction value
    data_type: String
  - name: change_pct
    description: Percentage change vs previous day
    data_type: String
  config:
    materialized: view
    tags:
    - production
    - execution
    - transactions
    access: public
  meta:
    owner: analytics_engineer
    authoritative: false
    generated_by: schema-writer
- name: api_execution_transactions_fees_by_project_latest_day
  description: Latest closed day fees (USD) by project (with % change vs previous day)
  columns:
  - name: label
    description: Project
    data_type: String
  - name: value
    description: Fee value
    data_type: String
  - name: change_pct
    description: Percentage change vs previous day
    data_type: String
  config:
    materialized: view
    tags:
    - production
    - execution
    - transactions
    access: public
  meta:
    owner: analytics_engineer
    authoritative: false
    generated_by: schema-writer
- name: api_execution_transactions_fees_usd_latest_day
  description: Latest closed day total fees (USD) with % change vs previous day.
  columns:
  - name: value
    description: Total fees in USD for the day.
    data_type: Float64
  - name: change_pct
    description: Percentage change in fees compared to the previous day.
    data_type: Float64
  config:
    access: public
  meta:
    owner: analytics_engineer
    authoritative: false
    generated_by: schema-writer
- name: api_execution_transactions_latest_day
  description: Latest closed day total transactions (with % change vs previous day).
  columns:
  - name: value
    description: Total transactions.
    data_type: String
  - name: change_pct
    description: Percentage change vs previous day.
    data_type: String
  config:
    materialized: view
    access: public
    tags:
    - production
    - execution
    - transactions
  meta:
    owner: analytics_engineer
    authoritative: false
    generated_by: schema-writer
- name: api_execution_transactions_snapshots
  description: Multi-window snapshots (1D/7D/30D/90D/All), anchored to MAX(date), with % change vs previous window
  columns:
  - name: label
    description: Label associated with the snapshot.
    data_type: String
  - name: window
    description: Time window for the snapshot.
    data_type: String
  - name: value
    description: Value captured in the snapshot.
    data_type: String
  - name: change_pct
    description: Percentage change vs previous window.
    data_type: Float64
  config:
    access: public
  meta:
    owner: analytics_engineer
    authoritative: false
    generated_by: schema-writer
- name: fct_execution_transactions_by_project_snapshots
  description: Unified by-project snapshots with 1D/7D/30D/90D/All and change% vs previous equal-length window.
  columns:
  - name: label
    description: Type of data (e.g., Transactions, FeesUSD, FeesNative, ActiveAccounts).
    data_type: String
  - name: window
    description: Snapshot window duration (1D, 7D, 30D, 90D, All).
    data_type: String
  - name: bucket
    description: Project identifier.
    data_type: String
  - name: value
    description: Value associated with the label.
    data_type: Float64
  - name: change_pct
    description: Percentage change vs previous window.
    data_type: Float64
  config:
    materialized: view
    tags:
    - production
    - execution
    - transactions
    access: public
  meta:
    owner: analytics_engineer
    authoritative: false
    generated_by: schema-writer
- name: fct_execution_transactions_snapshots
  description: 'One fact for all windows, including 1D, with % change vs previous equal-length window. NOTE: ActiveAccounts is summed across days. If you need window-unique users, we can switch to bitmaps.'
  columns:
  - name: label
    description: Label for the data point.
    data_type: String
  - name: window
    description: Window size for the data aggregation.
    data_type: String
  - name: value
    description: Value associated with the label.
    data_type: Float64
  - name: change_pct
    description: Percentage change vs previous window.
    data_type: Float64
  config:
    materialized: view
    tags:
    - production
    - execution
    - transactions
    access: public
  meta:
    owner: analytics_engineer
    authoritative: false
    generated_by: schema-writer
- name: api_execution_transactions_fees_usd_latest_day_vs_week_ago
  description: Latest closed day total fees (USD) with % change vs the same metric 7 days earlier (Dmax vs Dmax-7).
  columns:
  - name: value
    description: Total fees in USD for the latest closed day.
    data_type: Float64
  - name: change_pct
    description: Percentage change vs the value 7 days earlier.
    data_type: Float64
  config:
    access: public
    tags:
    - production
    - execution
    - transactions
  meta:
    owner: analytics_engineer
    authoritative: false
    generated_by: schema-writer
- name: api_execution_transactions_by_project_monthly
  description: Monthly transactions by project with Top 5 per month; remaining projects grouped as "Others". Excludes the current (incomplete) month.
  columns:
    - name: date
      description: First day of the month (UTC).
      data_type: DateTime
      tests: [not_null]
    - name: label
      description: Project label or "Others".
      data_type: String
      tests: [not_null]
    - name: value
      description: Total transactions in the month for the label.
      data_type: UInt64
      tests: [not_null]
  config:
    materialized: view
    tags: [production, execution, transactions]