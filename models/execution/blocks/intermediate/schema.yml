version: 2
models:

- name: execution_blocks_clients_version_daily
  description: Business-facing table summarizing client versions per day, derived from raw execution data.
  columns:
  - name: date
    description: Date of the record in UTC (UTC date, no time component).
    data_type: Date
    tests:
    - not_null
  - name: client
    description: Client identifier, normalized to known categories or 'Unknown'.
    data_type: String
    tests:
    - not_null
  - name: version
    description: Client version string, may be empty if not specified.
    data_type: String
  - name: value
    description: Aggregated count of occurrences for the client-version on the date.
    data_type: UInt64
    tests:
    - not_null
  config:
    access: public
    materialized: table
    tags:
    - daily
    - client
    - version
- name: execution_blocks_production
  description: Data model representing execution blocks with associated metadata, transactions, logs, and related entities for Gnosis Chain analysis.
  columns:
  - name: block_timestamp
    description: UTC timestamp of the block (materialized from `timestamp` in source).
    data_type: DateTime
    tests:
    - not_null
  - name: extra_data
    description: Arbitrary extra-data bytes set by the block proposer (hex).
    data_type: String
  config:
    access: public
    materialized: incremental
    tags:
    - gnosis
    - execution
- name: int_execution_blocks_clients_version_daily
  description: Business-facing table summarizing client versions per day with counts.
  columns:
  - name: date
    description: Date of the record, representing the start of the day (UTC).
    data_type: Date
  - name: client
    description: Client identifier; normalized to 'Unknown' if missing or unrecognized.
    data_type: String
  - name: version
    description: Client version string; empty if not available.
    data_type: String
  - name: cnt
    description: Count of occurrences for the client version on the given date.
    data_type: UInt64
  config:
    access: public
    tags:
    - production
    - execution
    - blocks
    materialized: table
  meta:
    owner: analytics_team
    authoritative: false
    generated_by: schema-writer
- name: int_execution_blocks_gas_usage_daily
  description: Daily aggregated gas usage metrics derived from execution blocks, including total gas used, gas limit, and the fraction of gas used.
  columns:
  - name: date
    description: The date (UTC) representing the day of the aggregated data.
    data_type: DateTime
  - name: gas_used_sum
    description: Total gas used across all blocks for the day (wei).
    data_type: UInt64
  - name: gas_limit_sum
    description: Total gas limit across all blocks for the day (wei).
    data_type: UInt64
  - name: gas_used_fraq
    description: Fraction of gas used, calculated as gas_used_sum / gas_limit_sum.
    data_type: Float64
  config:
    access: public
    tags:
    - production
    - execution
    - blocks
    - gas
    materialized: table
  meta:
    owner: analytics-team
    authoritative: false
    generated_by: schema-writer
