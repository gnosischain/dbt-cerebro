version: 2
models:

- name: int_consensus_validators_balances_dist_daily
  description: Daily distribution of validator balances based on quantiles from the consensus layer, aggregated per day.
  columns:
  - name: date
    description: Date representing the start of the day (UTC) for the distribution.
    data_type: DateTime
  - name: q05
    description: 5th percentile of validator balances for the day.
    data_type: Float64
  - name: q10
    description: 10th percentile of validator balances for the day.
    data_type: Float64
  - name: q25
    description: 25th percentile of validator balances for the day.
    data_type: Float64
  - name: q50
    description: 50th percentile (median) of validator balances for the day.
    data_type: Float64
  - name: q75
    description: 75th percentile of validator balances for the day.
    data_type: Float64
  - name: q90
    description: 90th percentile of validator balances for the day.
    data_type: Float64
  - name: q95
    description: 95th percentile of validator balances for the day.
    data_type: Float64
  config:
    access: public
    tags:
    - production
    - consensus
    - validators_balances
    materialized: table
  meta:
    owner: analytics-team
    authoritative: false
    generated_by: schema-writer
- name: int_consensus_validators_status_daily
  description: Daily aggregated status of consensus validators, including counts and statuses, derived from raw beacon chain data.
  columns:
  - name: date
    description: Day-level date derived from slot_timestamp, representing the day of data aggregation.
    data_type: DateTime
  - name: status
    description: Validator status (e.g., 'active', 'pending', 'exited').
    data_type: String
  - name: cnt
    description: Count of validators with the given status on the date.
    data_type: UInt64
  config:
    access: public
    materialized: incremental
    tags:
    - production
    - consensus
    - validators_status
  meta:
    owner: analytics_team
    authoritative: false
    generated_by: schema-writer
- name: int_consensus_attestations_daily
  description: Daily aggregated count of consensus attestations, grouped by date and inclusion delay.
  columns:
  - name: date
    description: Date representing the start of the day for which attestations are aggregated.
    data_type: DateTime
  - name: inclusion_delay
    description: Difference in slots between the attestation slot and the attestation inclusion slot.
    data_type: UInt64
  - name: cnt
    description: Count of attestations for the given date and inclusion delay.
    data_type: UInt64
  config:
    access: public
    materialized: incremental
    tags:
    - production
    - consensus
    - attestations
  meta:
    owner: analytics-team
    authoritative: false
    generated_by: schema-writer
- name: int_consensus_blob_commitments_daily
  description: Daily aggregated data of consensus blob commitments, including commitment counts and timestamps.
  columns:
  - name: date
    description: Date representing the start of the day for the commitment data.
    data_type: DateTime64(0, 'UTC')
  - name: cnt
    description: Total number of blob commitments recorded on the date.
    data_type: UInt64
  config:
    access: public
    materialized: incremental
    tags:
    - production
    - consensus
    - blob_commitments
  meta:
    owner: analytics-team
    authoritative: false
    generated_by: schema-writer
- name: int_consensus_blocks_daily
  description: Daily aggregated data summarizing consensus layer blocks, missed blocks, and related metrics for Gnosis Chain.
  columns:
  - name: date
    description: The day for which the metrics are aggregated, in UTC.
    data_type: Date
  - name: blocks_produced
    description: Count of blocks produced on the given date.
    data_type: UInt64
  - name: blocks_missed
    description: Number of expected blocks missed on the given date.
    data_type: UInt64
  config:
    access: public
    materialized: table
    tags:
    - production
    - consensus
    - blocks
  meta:
    owner: analytics-team
    authoritative: false
    generated_by: schema-writer
- name: int_consensus_credentials_daily
  description: Daily count of consensus credentials grouped by type, derived from validator data.
  columns:
  - name: date
    description: Date representing the start of the day (UTC) for the aggregated data.
    data_type: DateTime
  - name: credentials_type
    description: First four bytes of withdrawal credentials indicating credential type.
    data_type: String
  - name: cnt
    description: Count of validator credentials of the specified type for the day.
    data_type: UInt64
  config:
    access: public
    tags:
    - production
    - consensus
    - credentials
    materialized: table
  meta:
    owner: analytics_team
    authoritative: false
    generated_by: schema-writer
- name: int_consensus_deposits_daily
  description: Daily aggregated deposits data derived from the consensus layer, including total amount and count of deposits per day.
  columns:
  - name: date
    description: Date representing the start of the day (UTC) for deposit aggregation.
    data_type: DateTime
  - name: total_amount
    description: Sum of deposit amounts in Gwei for the day.
    data_type: Float64
  - name: cnt
    description: Count of deposit transactions for the day.
    data_type: UInt64
  config:
    access: public
    tags:
    - production
    - consensus
    - deposits
    materialized: incremental
  meta:
    owner: analytics-team
    authoritative: false
    generated_by: schema-writer
- name: int_consensus_entry_queue_daily
  description: Daily aggregated data on validator queue activations, quantiles, and mean activation days for consensus layer.
  columns:
  - name: epoch_activation
    description: Epoch at which validator activation occurred.
    data_type: UInt64
  - name: date
    description: Date corresponding to the start of the day for the activation event.
    data_type: DateTime64(0, 'UTC')
  - name: epoch_eligibility
    description: Epoch when validator became eligible for activation.
    data_type: UInt64
  - name: validator_index
    description: Unique index of the validator.
    data_type: UInt64
  - name: activation_days
    description: Number of days from eligibility to activation.
    data_type: Float64
  - name: validator_count
    description: Total number of validators active on the date.
    data_type: UInt64
  - name: q05
    description: 5th percentile of activation days.
    data_type: Float64
  - name: q10
    description: 10th percentile of activation days.
    data_type: Float64
  - name: q25
    description: 25th percentile of activation days.
    data_type: Float64
  - name: q50
    description: Median activation days.
    data_type: Float64
  - name: q75
    description: 75th percentile of activation days.
    data_type: Float64
  - name: q90
    description: 90th percentile of activation days.
    data_type: Float64
  - name: q95
    description: 95th percentile of activation days.
    data_type: Float64
  - name: mean
    description: Average activation days.
    data_type: Float64
  config:
    access: public
    tags:
    - production
    - consensus
    - entry_queue
    materialized: table
  meta:
    owner: analytics_team
    authoritative: false
    generated_by: schema-writer
- name: int_consensus_graffiti_daily
  description: Aggregated daily data capturing graffiti labels, labels, and related metadata from consensus beacon blocks, including label detection and categorization.
  columns:
  - name: date
    description: The date of the data aggregation, truncated to day.
    data_type: DateTime
  - name: graffiti
    description: Raw graffiti string extracted from beacon blocks.
    data_type: String
  - name: label
    description: Categorized label based on graffiti content, following priority rules.
    data_type: String
  - name: cnt
    description: Count of occurrences for the given graffiti label on the date.
    data_type: UInt64
  config:
    access: public
    materialized: table
    tags:
    - production
    - consensus
    - graffiti
  meta:
    owner: analytics-team
    authoritative: false
    generated_by: schema-writer
- name: int_consensus_validators_apy_daily
  description: Daily aggregated data on validator APY, balances, deposits, withdrawals, and related metrics for consensus validators.
  columns:
  - name: date
    description: Date of the record, representing the start of the day in UTC.
    data_type: DateTime64(0, 'UTC')
  - name: balance
    description: Total validator balance in wei.
    data_type: UInt64
  - name: balance_diff
    description: Difference in total validator balance from previous day in wei.
    data_type: Int64
  - name: deposited_amount
    description: Total amount deposited on the day in wei.
    data_type: UInt64
  - name: withdrawaled_amount
    description: Total amount withdrawn on the day in wei.
    data_type: UInt64
  - name: deposited_amount_request
    description: Sum of deposit request amounts in wei.
    data_type: UInt64
  - name: withdrawaled_amount_request
    description: Sum of withdrawal request amounts in wei.
    data_type: UInt64
  - name: eff_balance_diff
    description: Effective balance change after deposits and withdrawals in wei.
    data_type: Int64
  - name: rate
    description: Rate of change of balance relative to previous balance (unitless).
    data_type: Float64
  - name: apy
    description: Annual Percentage Yield calculated from rate, in percentage.
    data_type: Float64
  config:
    access: public
    materialized: table
    tags:
    - production
    - consensus
    - validators_apy
  meta:
    owner: analytics-team
    authoritative: false
    generated_by: schema-writer
- name: int_consensus_validators_apy_dist
  description: Business-facing model providing the distribution of annual percentage yields (APY) for validators, aggregated monthly. Derived from validator rate calculations and quantile analysis.
  columns:
  - name: date
    description: The first day of the month for which the APY distribution is calculated.
    data_type: Date
  - name: q05
    description: 5th percentile of validator APY distribution for the month.
    data_type: Float64
  - name: q10
    description: 10th percentile of validator APY distribution for the month.
    data_type: Float64
  - name: q25
    description: 25th percentile of validator APY distribution for the month.
    data_type: Float64
  - name: q50
    description: Median (50th percentile) of validator APY distribution for the month.
    data_type: Float64
  - name: q75
    description: 75th percentile of validator APY distribution for the month.
    data_type: Float64
  - name: q90
    description: 90th percentile of validator APY distribution for the month.
    data_type: Float64
  - name: q95
    description: 95th percentile of validator APY distribution for the month.
    data_type: Float64
  config:
    access: public
    materialized: table
    tags:
    - production
    - consensus
    - validators_apy
  meta:
    owner: analytics-team
    authoritative: false
    generated_by: schema-writer
- name: int_consensus_validators_balances_daily
  description: Daily aggregated balances and effective balances of consensus validators, derived from slot-based data, for business insights.
  columns:
  - name: date
    description: Date representing the start of the day for the balance aggregation.
    data_type: DateTime
  - name: balance
    description: Sum of validator balances in Gwei (wei / 10^9).
    data_type: Float64
  - name: effective_balance
    description: Sum of validator effective balances in Gwei (wei / 10^9).
    data_type: Float64
  config:
    access: public
    tags:
    - production
    - consensus
    - validators_balances
    materialized: table
  meta:
    owner: analytics-team
    authoritative: false
    generated_by: schema-writer
- name: int_consensus_withdrawls_dist_daily
  description: Daily aggregated statistics of consensus withdrawals including quantiles, total amount, and count, derived from the consensus withdrawals data.
  columns:
  - name: date
    description: Date representing the start of the day for the withdrawal statistics.
    data_type: DateTime64(0, 'UTC')
  - name: total_amount
    description: Sum of withdrawal amounts in wei for the day.
    data_type: UInt64
  - name: cnt
    description: Total number of withdrawal transactions for the day.
    data_type: UInt64
  - name: min
    description: Minimum withdrawal amount in wei within the day.
    data_type: UInt64
  - name: q05
    description: 5th percentile withdrawal amount in wei within the day.
    data_type: UInt64
  - name: q10
    description: 10th percentile withdrawal amount in wei within the day.
    data_type: UInt64
  - name: q25
    description: 25th percentile withdrawal amount in wei within the day.
    data_type: UInt64
  - name: q50
    description: Median withdrawal amount in wei within the day.
    data_type: UInt64
  - name: q75
    description: 75th percentile withdrawal amount in wei within the day.
    data_type: UInt64
  - name: q90
    description: 90th percentile withdrawal amount in wei within the day.
    data_type: UInt64
  - name: q95
    description: 95th percentile withdrawal amount in wei within the day.
    data_type: UInt64
  - name: max
    description: Maximum withdrawal amount in wei within the day.
    data_type: UInt64
  config:
    access: public
    tags:
    - production
    - consensus
    - withdrawals
    materialized: incremental
  meta:
    owner: analytics-team
    authoritative: false
    generated_by: schema-writer
