version: 2

models:
  - name: gnosis_p2p_nodes_status
    meta:
      blockchain: gnosis
      sector: p2p
      contributors: hdser
    config:
      tags: ['p2p', 'gnosis', 'hdser']
    description: >
        Block resolution xDAI balances and balances diff for each address on gnosis.
        Depends on transfers_gnosis_xdai
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - node_id
            - last_seen
            - last_seen_lead

    columns:
      - &node_id
        name: node_id
        description: "Node ID"
      - &last_seen
        name: last_seen
        description: "Last time node was seen in the network"
      - &last_seen_lead
        name: last_seen_lead
        description: "Lead Last time node was seen in the network"
      - &status
        name: status
        description: "Active/Inactive node"

  - name: gnosis_p2p_nodes_count
    meta:
      blockchain: gnosis
      sector: p2p
      contributors: hdser
    config:
      tags: ['p2p', 'gnosis', 'hdser']
    description: >
        Block resolution xDAI balances and balances diff for each address on gnosis.
        Depends on transfers_gnosis_xdai
    columns:
      - &date
        name: date
        description: "Last time node was seen in the network"
      - &active_nodes
        name: active_nodes
        description: "Lead Last time node was seen in the network"


  - name: gnosis_p2p_nodes
    meta:
      blockchain: gnosis
      sector: p2p
      contributors: hdser
    config:
      tags: ['p2p', 'gnosis', 'hdser']
    description: >
        Block resolution xDAI balances and balances diff for each address on gnosis.
        Depends on transfers_gnosis_xdai

  - name: test
    meta:
      blockchain: gnosis
      sector: p2p
      contributors: hdser
    config:
      tags: ['p2p', 'gnosis', 'hdser']
    description: >
        Block resolution xDAI balances and balances diff for each address on gnosis.
        Depends on transfers_gnosis_xdai